syntax = "proto3";
package attestation.v1;

import "attestation/v1/state.proto";
import "gogoproto/gogo.proto";

option go_package = "github.com/crypto-org-chain/cronos/x/attestation/types";

// AttestationPacketData defines the IBC v2 packet structure for attestation transfer
// Note: IBC v2 protocol handles authentication (relayer, signature, nonce) at the transport layer
message AttestationPacketData {
  option (gogoproto.goproto_getters) = false;

  // Source chain ID (where the blocks originated)
  string source_chain_id = 1;

  // Rollup address
  string rollup_address = 2;

  // Batch of block attestations
  repeated BlockAttestationData attestations = 3 [(gogoproto.nullable) = false];
}

// AttestationPacketAcknowledgement defines the acknowledgement returned by the attestation chain
message AttestationPacketAcknowledgement {
  option (gogoproto.goproto_getters) = false;

  // Whether the attestation was successful
  bool success = 1;

  // Error message if failed
  string error = 2;

  // List of attestation IDs created on attestation chain
  repeated uint64 attestation_ids = 3;

  // List of block heights that were attested
  repeated uint64 attest_block_heights = 4;

  // Finality timestamp (0 if not finalized)
  int64 finalized_at = 5;

  // Finality proof (validator signatures, etc.)
  bytes finality_proof = 6;
}

// IBC v2 module parameters for attestation
message Params {
  // How many blocks between attestation sends (interval)
  uint64 attestation_interval = 1;

  // Enable/disable attestation sending
  bool attestation_enabled = 2;

  // Timeout for IBC v2 packets (in nanoseconds)
  uint64 packet_timeout_timestamp = 3;
}
