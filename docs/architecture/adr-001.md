# ADR 001: Disable Gravity Bridge at Genesis

## Changelog
* 12-10-2021: Initial Draft

## Context

The Gravity Bridge module was added for fungible asset transfers from and to the Ethereum network.
Additionally, custom code was added for directly mapping the native tokens from Gravity Bridge
to the Ethermint module. At the time of writing, Gravity Bridge does not have a stable release
and the codebase contains several known issues.

## Decision

The Gravity Bridge module-related functionality will be hidden under the `+gravity` build tag
that is disabled by default. In particular, this will require conditional compilation on the common SDK app infrastructure:
1. "app/app.go" which contains the module initialization boilerplate
2. "cmd/cronosd/cmd/root.go" which adds Gravity Bridge-related commands.

In addition to that, the "x/cronos" module contains Gravity Bridge-related code in its types and keeper. This code should be separated
to a new "x/cronos-gravity" module that will be added to the `+gravity` version of "app/app.go" together with the Gravity Bridge module.

Finally, the Gravity Bridge version of "app/app.go" should also contain an upgrade handler that would add the
Gravity Bridge module and the new Cronos module:
```
...
		storeUpgrades := storetypes.StoreUpgrades{
			Added: []string{"gravity", "cronos-gravity"},
		}
...
```

Existing integration tests related to Gravity Bridge can be temporarily disabled, and later enabled when the integration test framework can
work with both versions (and potentially test the upgrade procedure). 

## Status

Proposed

## Consequences

### Positive
* Reduced complexity in the initial Cronos state
* Reduced complexity in the initial infrastructure deployment 
* Possible to add the Gravity Bridge module in a coordinated upgrade when the module gets a stable release

### Negative
* Extra build complexity

### Neutral
* Two Cronos modules

## References

* https://github.com/althea-net/cosmos-gravity-bridge/issues/348
* https://github.com/althea-net/cosmos-gravity-bridge/issues/347
* https://github.com/althea-net/cosmos-gravity-bridge/issues/346
* https://github.com/althea-net/cosmos-gravity-bridge/issues/344